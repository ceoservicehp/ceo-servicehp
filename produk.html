<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kelola Produk â€” CEO Service HP</title>
  
<link rel="stylesheet" href="css/produk.css">
<link rel="stylesheet"
href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="js/supabase.js"></script>
<script src="js/auth.js"></script>
<script src="js/role-guard.js"></script>
<script defer src="js/produk.js"></script>
</head>

<body>

<!-- ================= HEADER ================= -->
<header>
  <div id="logo-container">
    <img src="images/logo.png" width="55">

    <div>
      <h1>CEO - KELOLA PRODUK</h1>
      <div class="tagline">CELLULAR ENGINEERING OFFICER</div>
    </div>
  </div>
  <button class="menu-toggle" id="menuToggle">
  <i class="fa-solid fa-bars"></i>
</button>
</header>

<!-- ================= NAVBAR ================= -->
<nav class="top-nav">
  <a href="index.html" class="nav-btn">
    <i class="fa-solid fa-house"></i>
    Beranda
  </a>

  <a href="profile.html" class="nav-btn">
    <i class="fa-solid fa-user"></i>
    Profil
  </a>
 
  <a href="dapur.html" class="nav-btn">
    <i class="fa-solid fa-kitchen-set"></i>
    Dapur
  </a>

  <a href="produk.html" class="nav-btn">
    <i class="fa-solid fa-box-open"></i>
    Produk
  </a>

  <a href="keuangan.html" class="nav-btn">
    <i class="fa-solid fa-wallet"></i>
    Keuangan
  </a>

  <a href="layanan.html" class="nav-btn">
    <i class="fa-solid fa-screwdriver-wrench"></i>
    Layanan
  </a>

  <a href="ceo_status.html" class="nav-btn">
    <i class="fa-solid fa-chart-line"></i>
    Status
  </a>
</nav>
<div class="nav-overlay" id="navOverlay"></div>


<div class="container">

  <!-- ================= FORM ================= -->
  <div class="card">
    <h2>Tambah / Edit Produk</h2>

    <input type="hidden" id="productId">

    <div class="form-group">
      <label>Nama Produk</label>
      <input type="text" id="productName" placeholder="Contoh: LCD Samsung">
    </div>

    <!-- KATEGORI -->
    <div class="form-group">
      <label>Kategori</label>
    
      <div style="display:flex;gap:8px;">
        <select id="productCategory" style="flex:1;"></select>
    
        <button type="button" id="addCategoryBtn">
          âž•
        </button>
      </div>
    
      <!-- Input Tambah Kategori -->
      <div id="newCategoryBox" style="margin-top:8px;display:none;">
        <input type="text" id="newCategoryName" 
               placeholder="Nama kategori baru">
    
        <button type="button" id="saveCategoryBtn">
          Simpan
        </button>
      </div>
    </div>

    <div class="form-group">
      <label>Harga</label>
      <input type="number" id="productPrice" placeholder="150000">
    </div>

    <div class="form-group">
      <label>Harga Modal</label>
      <input type="number" id="productCost">
    </div>
    
    <div class="form-group">
      <label>Harga Promo</label>
      <input type="number" id="productPromo">
    </div>
    
    <div class="form-group">
      <label>Stok</label>
      <input type="number" id="productStock">
    </div>

    <div class="form-group">
      <label>Deskripsi</label>
      <textarea id="productDesc" rows="3"
        placeholder="Deskripsi produk..."></textarea>
    </div>

    <!-- GAMBAR + PREVIEW -->
    <div class="form-group">
      <label>Gambar Produk</label>
      <input type="file" id="productImage" accept="image/*">

      <!-- Preview -->
      <div style="margin-top:10px;">
        <img id="imagePreview" 
             src="" 
             style="max-width:150px;display:none;border-radius:8px;">
      </div>
    </div>

    <div class="form-group">
      <label>Status Produk</label>
      <label>
        <input type="checkbox" id="productActive" checked>
        Aktif
      </label>
    </div>

    <button class="btn-primary" id="saveProduct">
      Simpan Produk
    </button>

  </div>

  <!-- ================= IMPORT MASSAL ================= -->
<div class="card">
  <h2>ðŸ“¥ Import Produk Massal (CSV)</h2>

  <div class="form-group">
    <label>Upload File CSV</label>
    <input type="file" id="importFile" accept=".csv">
  </div>

  <small>
    Format kolom CSV:<br>
    name,category,price,cost,promo_price,stock,description,is_active
  </small>

  <br><br>

  <button class="btn-primary" id="importBtn">
    Import Produk
  </button>

  <div id="importResult" style="margin-top:10px;"></div>
</div>

  <!-- ================= TABLE ================= -->
  <div class="card">
    <h2>Daftar Produk</h2>

    <div class="table-wrapper">
      <table>
        <thead>
          <tr>
            <th>No</th>
            <th>Gambar</th>
            <th>Nama</th>
            <th>Kategori</th>
            <th>Harga</th>
            <th>Modal</th>
            <th>Promo</th>
            <th>Stok</th>
            <th>Status</th>
            <th>Aksi</th>
          </tr>
        </thead>
        <tbody id="productTable">
          <tr>
            <td colspan="10">Memuat data...</td>
          </tr>
        </tbody>
      </table>
    </div>

  </div>

</div>

<!-- ================= FOOTER ================= -->
<footer>
  Â© 2026 CEO Part & Service â€” All Rights Reserved
</footer>

</body>
</html>
